# 登入註冊 (Auth)

## 頁面概述

登入註冊流程是使用者進入 App 的第一步，包含登入、註冊、OTP 驗證等功能。

---

## 登入頁面

```
┌─────────────────────────────────────────┐
│                                         │
│           ❤️❤️                          │
│        公益愛心Pay                       │
│                                         │
├─────────────────────────────────────────┤
│                                         │
│  會員帳號：                              │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  會員密碼：                              │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌──────────┐    ┌──────────┐         │
│  │ 建立帳號 │    │ 忘記密碼 │         │
│  └──────────┘    └──────────┘         │
│                                         │
│        ┌──────────────────┐            │
│        │      登 入       │            │
│        └──────────────────┘            │
│                                         │
│                                         │
│           公益愛心Pay ®                  │
│                                         │
└─────────────────────────────────────────┘
```

### 登入表單

| 欄位 | 類型 | 必填 | 說明 |
|------|------|------|------|
| 會員帳號 | 文字輸入 | 是 | 手機號碼 |
| 會員密碼 | 密碼輸入 | 是 | 密碼 |

### 操作按鈕

| 按鈕 | 說明 |
|------|------|
| 建立帳號 | 跳轉至註冊流程 |
| 忘記密碼 | 跳轉至忘記密碼流程 |
| 登入 | 執行登入（先發送 OTP） |

---

## 註冊流程

### 步驟 1：選擇會員類型

```
┌─────────────────────────────────────────┐
│           選擇會員類型                    │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────────────────────────────────┐   │
│  │        👤 個人會員               │   │
│  │        一般個人用戶              │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │        🏪 公益商家               │   │
│  │        提供公益服務的商家         │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │        🏢 商務會員               │   │
│  │        企業或商務用戶            │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

### 步驟 2：輸入手機號碼

| 欄位 | 類型 | 必填 | 說明 |
|------|------|------|------|
| 手機號碼 | 電話輸入 | 是 | 台灣手機號碼（09xxxxxxxx） |

### 步驟 3：OTP 驗證

```
┌─────────────────────────────────────────┐
│           驗證手機號碼                    │
├─────────────────────────────────────────┤
│                                         │
│  已發送驗證碼至 0912-345-678            │
│                                         │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐ │
│  │   │ │   │ │   │ │   │ │   │ │   │ │
│  └───┘ └───┘ └───┘ └───┘ └───┘ └───┘ │
│                                         │
│  重新發送 (60秒)                         │
│                                         │
│        ┌──────────────────┐            │
│        │      確認驗證     │            │
│        └──────────────────┘            │
│                                         │
└─────────────────────────────────────────┘
```

| 項目 | 說明 |
|------|------|
| 驗證碼 | 6 位數字 |
| 有效期 | 5 分鐘 |
| 重發間隔 | 60 秒 |
| 每日上限 | 10 次 |

### 步驟 4：設定密碼

| 欄位 | 類型 | 必填 | 說明 |
|------|------|------|------|
| 密碼 | 密碼輸入 | 是 | 至少 8 位，含英數字 |
| 確認密碼 | 密碼輸入 | 是 | 需與密碼相同 |

### 步驟 5：填寫個人資料

| 欄位 | 類型 | 必填 | 說明 |
|------|------|------|------|
| 姓名 | 文字輸入 | 是 | 真實姓名 |
| Email | 電子郵件 | 否 | 電子信箱 |
| 生日 | 日期選擇 | 否 | 出生日期 |
| 性別 | 單選 | 否 | 男/女/其他 |
| 所屬商會 | 下拉選擇 | 是 | 選擇商會 |
| 推薦人 | 搜尋選擇 | 否 | 推薦會員 |

**商務會員額外欄位：**

| 欄位 | 類型 | 必填 | 說明 |
|------|------|------|------|
| 公司名稱 | 文字輸入 | 是 | 公司/店家名稱 |
| 統一編號 | 文字輸入 | 否 | 公司統編 |
| 產業別 | 下拉選擇 | 是 | 所屬產業 |
| 公司地址 | 文字輸入 | 否 | 公司地址 |

### 步驟 6：電子簽名

```
┌─────────────────────────────────────────┐
│           電子簽名                        │
├─────────────────────────────────────────┤
│                                         │
│  請在下方簽名區簽名                       │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  │         （簽名區域）             │   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌──────────┐    ┌──────────┐         │
│  │   清除   │    │   確認   │         │
│  └──────────┘    └──────────┘         │
│                                         │
└─────────────────────────────────────────┘
```

### 步驟 7：同意條款

| 項目 | 說明 |
|------|------|
| 隱私政策 | 必須勾選同意 |
| 服務條款 | 必須勾選同意 |
| 查看內容 | 可點擊查看完整內容 |

### 步驟 8：完成註冊

- 顯示註冊成功訊息
- 說明帳號待審核
- 可返回登入頁面

---

## 忘記密碼流程

### 步驟 1：輸入手機號碼

| 欄位 | 類型 | 必填 | 說明 |
|------|------|------|------|
| 手機號碼 | 電話輸入 | 是 | 已註冊的手機號碼 |

### 步驟 2：OTP 驗證

同註冊流程的 OTP 驗證。

### 步驟 3：重設密碼

| 欄位 | 類型 | 必填 | 說明 |
|------|------|------|------|
| 新密碼 | 密碼輸入 | 是 | 至少 8 位，含英數字 |
| 確認密碼 | 密碼輸入 | 是 | 需與新密碼相同 |

---

## API 呼叫

| 功能 | API | 說明 |
|------|-----|------|
| 發送驗證碼 | POST /api/v1/auth/send-otp | 發送 OTP |
| 驗證驗證碼 | POST /api/v1/auth/verify-otp | 驗證 OTP |
| 註冊 | POST /api/v1/auth/register | 會員註冊 |
| 登入 | POST /api/v1/auth/login | 會員登入 |
| 忘記密碼 | POST /api/v1/auth/forgot-password | 忘記密碼 |
| 重設密碼 | POST /api/v1/auth/reset-password | 重設密碼 |
| 商會列表 | GET /api/v1/organizations/tree | 取得商會列表 |

---

## 錯誤處理

| 錯誤代碼 | 說明 | 處理方式 |
|----------|------|----------|
| AUTH_001 | 驗證碼錯誤 | 顯示錯誤訊息 |
| AUTH_002 | 驗證碼已過期 | 提示重新發送 |
| AUTH_003 | 發送過於頻繁 | 顯示倒數計時 |
| AUTH_004 | 手機號碼已註冊 | 導向登入頁面 |
| AUTH_005 | 帳號不存在 | 提示註冊 |
| AUTH_006 | 密碼錯誤 | 顯示錯誤訊息 |
| AUTH_009 | 帳號待審核中 | 顯示待審核訊息 |

---

## 相關頁面

- [首頁](./home.md)
- [個人資料](./profile.md)
