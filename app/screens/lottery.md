# 抽抽樂 (Lottery)

## 頁面概述

抽抽樂是一個小瑪莉風格的抽獎遊戲，會員可使用點數進行抽獎。

---

## 頁面結構

```
┌─────────────────────────────────────────┐
│           抽抽樂                          │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────────────────────────────────────┐│
│  │                                     ││
│  │      🎰 小瑪莉遊戲畫面 🎰           ││
│  │                                     ││
│  │   ┌─────┐ ┌─────┐ ┌─────┐         ││
│  │   │ 🍒  │ │ 🍋  │ │ 🔔  │         ││
│  │   └─────┘ └─────┘ └─────┘         ││
│  │                                     ││
│  │         [ 開始抽獎 ]               ││
│  │                                     ││
│  └─────────────────────────────────────┘│
│                                         │
├─────────────────────────────────────────┤
│  可用點數：1200                          │
│  每次消耗：10 點                         │
├─────────────────────────────────────────┤
│  獎品說明：                              │
│  🍒🍒🍒 三櫻桃 - 100 點                 │
│  🍋🍋🍋 三檸檬 - 50 點                  │
│  🔔🔔🔔 三鈴鐺 - 30 點                  │
│  ⭐⭐⭐ 三星星 - 20 點                  │
├─────────────────────────────────────────┤
│  [ 抽獎紀錄 ]                           │
└─────────────────────────────────────────┘
```

---

## 遊戲機制

### 基本規則

| 項目 | 說明 |
|------|------|
| 遊戲類型 | 小瑪莉/老虎機 |
| 消耗點數 | 每次 10 點（可後台設定） |
| 中獎機率 | 後台設定 |
| 獎品類型 | 點數獎勵 |

### 獎品設定

| 組合 | 獎勵點數 | 機率 |
|------|----------|------|
| 三櫻桃 🍒🍒🍒 | 100 點 | 低 |
| 三檸檬 🍋🍋🍋 | 50 點 | 中低 |
| 三鈴鐺 🔔🔔🔔 | 30 點 | 中 |
| 三星星 ⭐⭐⭐ | 20 點 | 中高 |
| 其他組合 | 0 點 | 高 |

---

## 遊戲流程

```
進入遊戲 → 確認點數足夠 → 點擊抽獎 → 動畫播放 → 顯示結果 → 發放獎勵
```

### 流程說明

| 步驟 | 說明 |
|------|------|
| 1 | 顯示可用點數 |
| 2 | 點擊「開始抽獎」 |
| 3 | 扣除消耗點數 |
| 4 | 播放轉動動畫 |
| 5 | 停止並顯示結果 |
| 6 | 若中獎則發放獎勵 |
| 7 | 更新點數餘額 |

---

## 抽獎紀錄

| 欄位 | 說明 |
|------|------|
| 時間 | 抽獎時間 |
| 消耗 | 消耗點數 |
| 結果 | 中獎組合 |
| 獎勵 | 獲得點數 |

---

## API 呼叫

| 功能 | API | 說明 |
|------|-----|------|
| 遊戲設定 | GET /api/v1/lottery/settings | 取得遊戲設定 |
| 進行抽獎 | POST /api/v1/lottery/play | 執行抽獎 |
| 抽獎紀錄 | GET /api/v1/lottery/history | 取得抽獎紀錄 |

---

## 錯誤處理

| 錯誤代碼 | 說明 | 處理方式 |
|----------|------|----------|
| LTY_001 | 點數不足 | 提示充值 |
| LTY_002 | 遊戲維護中 | 顯示維護訊息 |
| LTY_003 | 今日次數已達上限 | 顯示限制訊息 |

---

## 相關頁面

- [首頁](./home.md)
- [使用點數](./points.md)
